---
import { siteConfig } from '../data/site';
import WhatsAppIcon from './icons/WhatsAppIcon.astro';
---

<div class="fixed bottom-6 right-6 z-50">
  <a
    href={siteConfig.contact.whatsappHref}
    target="_blank"
    rel="noopener noreferrer"
    aria-label="Escríbenos por WhatsApp"
    data-gtm="cta-whatsapp"
    data-gtm-location="floating-button"
    class="group relative flex h-14 w-14 items-center justify-center rounded-full bg-[#25d366] shadow-[0_4px_24px_rgba(37,211,102,0.4)] transition-all duration-300 hover:scale-105 hover:shadow-[0_6px_32px_rgba(37,211,102,0.5)]"
  >
    <!-- Pulse ring -->
    <span class="absolute inset-0 animate-wa-ping rounded-full bg-[#25d366]/40" />

    <!-- Tooltip (positioned left of button) -->
    <span class="pointer-events-none absolute right-full mr-3 hidden whitespace-nowrap rounded-lg bg-neutral-900 px-3 py-1.5 text-sm font-medium text-white opacity-0 shadow-lg transition-all duration-300 group-hover:opacity-100 sm:block" aria-hidden="true">
      ¿Necesitas ayuda?
    </span>

    <!-- Icon -->
    <WhatsAppIcon class="relative h-7 w-7 text-white" />
  </a>
</div>

<style>
  @keyframes wa-ping {
    0% {
      transform: scale(1);
      opacity: 0.4;
    }
    70% {
      transform: scale(1.6);
      opacity: 0;
    }
    100% {
      transform: scale(1.6);
      opacity: 0;
    }
  }

  .animate-wa-ping {
    animation: wa-ping 2.5s cubic-bezier(0, 0, 0.2, 1) infinite;
  }
</style>
