---
import BaseLayout from '../layouts/BaseLayout.astro';
import WhatsAppIcon from '../components/icons/WhatsAppIcon.astro';
import { siteConfig } from '../data/site';

const doctors = [
  {
    name: 'Dr. David Ben-Dov Codner',
    role: 'Director Médico',
    image: '/images/site/dr-david-bendov.webp',
    credentials: [
      'Médico Cirujano Ginecólogo, Universidad de Chile',
      'Más de 25 años de experiencia en Minilipo y Liposucción',
      'Especialista en Clínica y Cirugía Estética',
      'Especialista en Procedimientos Estéticos Ginecológicos',
      'Director Médico Bendov Clínica Estética',
    ],
    specialties: [
      'Liposucción',
      'Labioplastia y procedimientos estéticos ginecológicos',
      'Armonización del Rostro',
      'Procedimientos estéticos integrales',
      'Bienestar hormonal, Pellet de Testosterona',
    ],
  },
  {
    name: 'Dr. Eduardo Costa Edwards',
    role: 'Cirujano Plástico Estético',
    image: '/images/site/dr-eduardo-costa.webp',
    credentials: [
      'Médico Cirujano, Universidad de Chile',
      'Cirujano Plástico Estético',
      'Más de 25 años de experiencia en Cirugía General y Estética',
      'Fellowship en Cirugía Endocrina y Oncológica, University of Chicago',
      'Formación en Cirugía Estética en Clínica Héctor Valdés y cursos internacionales (Brasil, EE.UU., Francia)',
      'Miembro del American College of Surgeons y American Academy of Cosmetic Surgery',
      'Docente universitario en distintas facultades de medicina',
    ],
    specialties: [
      'Liposucción y contorno corporal',
      'Cirugía facial estética (lifting, párpados, etc.)',
      'Cirugía de mamas (aumento, reducción, pexia)',
      'Abdominoplastia y cirugía postbariátrica',
      'Reconstrucción estética integral',
    ],
  },
  {
    name: 'Dra. Myriam Colodro Ebner',
    role: 'Especialista en Armonización Facial',
    image: '/images/site/dra-myriam-colodro.webp',
    credentials: [
      'Cirujano Dentista especialista en medicina estética, Universidad Mayor, Chile',
      'Master en Armonización Facial, ENOVA, Brasil, 2022',
      'Certificación Hilos Tensores APTOS, APTOS Training, Chile, 2022',
    ],
    specialties: [
      'Armonización del rostro',
      'Técnicas avanzadas con toxina botulínica, rellenos, bioestimulación e hilos tensores',
      'Evaluación estética y funcional tercio inferior',
    ],
  },
  {
    name: 'Dra. Mabel Suarez',
    role: 'Oftalmóloga Oculoplástica',
    image: '/images/site/dra-mabel-suarez.webp',
    credentials: [
      'Médico Cirujano Oftalmólogo Oculoplástico, Universidad de los Andes, Venezuela. Revalidado en Universidad de Chile',
      'Especialista en Oftalmología, otorgado por CONACEM',
      'Más de 12 años de trabajo y perfeccionamiento en Estética Facial, tanto en Chile como en el extranjero',
      'Integrante del directorio SOEMAF (Soc. Chilena de Estética Maxilofacial)',
      'Miembro Sociedad Chilena de Oftalmología',
      'Miembro Sociedad Chilena de Oculoplástica',
    ],
    specialties: [
      'Cirugías oculoplásticas',
      'Blefaroplastia',
    ],
  },
  {
    name: 'Dr. Salomón Núñez',
    role: 'Especialista en Medicina Estética',
    image: '/images/site/dr-salomon-nunez.webp',
    credentials: [
      'Médico Cirujano, Pontificia Universidad Católica de Chile',
      '10 años de experiencia en Cirugía',
      'Master en Medicina Estética y Anti-Aging, Academia Europea de Medicina Estética',
      'Diplomado Internacional en Medicina Estética, Universidad John F. Kennedy',
      'Curso Lipoescultura, injerto graso y minidermo, Sociedad Colombiana de Medicina y Cirugía Estética',
      'Miembro Colegio Médico de Chile',
      'Miembro Sociedad Chilena de Cirugía y Medicina Estética',
      'Miembro Asociación Colombiana de Medicina y Cirugía Estética',
    ],
    specialties: [
      'Liposucción',
      'Cirugías corporales',
      'Armonización facial',
    ],
  },
  {
    name: 'Dra. Paulina Garriga Maldonado',
    role: 'Especialista en Estética Orofacial',
    image: '/images/site/dra-paulina-garriga.webp',
    credentials: [
      'Cirujano Dentista y Tecnóloga Dental, Universidad de Chile',
      'Especialista en estética dental y orofacial',
      'Más de 12 años de trabajo y perfeccionamiento en Estética Facial, tanto en Chile como en el extranjero',
      'Integrante del directorio SOEMAF (Soc. Chilena de Estética Maxilofacial)',
    ],
    specialties: [
      'Bichectomía y Armonización del rostro',
      'Técnicas avanzadas con toxina botulínica, rellenos, bioestimulación e hilos tensores',
      'Evaluación estética y funcional tercio inferior',
    ],
  },
];

// Build Physician JSON-LD in frontmatter to avoid regex/esbuild issues in template
const universityRegex = /universidad|university|pontificia|academia|enova/i;
const memberRegex = /miembro|integrante|member/i;
const memberPrefixRegex = /^(Miembro|Integrante)\s+(de\s+|del\s+)?/i;
const afterCommaRegex = /^.*?,\s*/;
const trailingYearRegex = /,\s*\d{4}$/;

const physicianJsonLd = JSON.stringify({
  "@context": "https://schema.org",
  "@graph": doctors.map((doctor) => ({
    "@type": "Physician",
    "name": doctor.name,
    "image": new URL(doctor.image, siteConfig.url).href,
    "jobTitle": doctor.role,
    "description": doctor.credentials.join('. '),
    "medicalSpecialty": doctor.specialties,
    "alumniOf": doctor.credentials
      .filter((c) => universityRegex.test(c))
      .map((c) => ({
        "@type": "EducationalOrganization",
        "name": c.replace(afterCommaRegex, '').replace(trailingYearRegex, '').trim(),
      })),
    "worksFor": {
      "@type": "MedicalClinic",
      "@id": `${siteConfig.url}/#organization`,
      "name": siteConfig.name,
    },
    "url": `${siteConfig.url}/sobre-nosotros/`,
    "memberOf": doctor.credentials
      .filter((c) => memberRegex.test(c))
      .map((c) => ({
        "@type": "MedicalOrganization",
        "name": c.replace(memberPrefixRegex, '').trim(),
      })),
  })),
});
---

<BaseLayout
  title="Sobre Nosotros"
  description="Conoce a Bendov Clínica Estética en Las Condes, Santiago. Equipo médico especializado en procedimientos estéticos faciales, corporales e íntimos."
>
  <!-- Physician / Person Structured Data (E-E-A-T) -->
  <script type="application/ld+json" set:html={physicianJsonLd} />

  <!-- Hero -->
  <section class="relative overflow-hidden bg-primary-950 pt-32 pb-20 md:pt-40 md:pb-28">
    <img src="/images/site/clinica-intro.webp" alt="" class="absolute inset-0 h-full w-full object-cover opacity-20" loading="eager" decoding="async" />
    <div class="absolute inset-0 bg-gradient-to-br from-primary-950/90 via-primary-900/80 to-primary-800/70" />
    <div class="relative mx-auto max-w-4xl px-6 text-center">
      <p class="mb-4 text-sm font-semibold uppercase tracking-[0.15em] text-primary-300">Bendov Clínica Estética</p>
      <h1 class="font-display text-3xl font-bold text-white md:text-5xl lg:text-6xl">Sobre Nosotros</h1>
      <p class="mx-auto mt-6 max-w-2xl text-lg text-primary-200 md:text-xl">
        Más de una década dedicados a la medicina estética, ayudando a nuestros pacientes a recuperar su confianza.
      </p>
    </div>
  </section>

  <!-- Intro + Mission/Vision -->
  <section class="mx-auto max-w-6xl px-6 py-20 md:py-28">
    <div class="grid grid-cols-1 items-center gap-16 lg:grid-cols-2">
      <div>
        <p class="text-sm font-semibold uppercase tracking-[0.15em] text-primary-600">Nuestra Clínica</p>
        <h2 class="mt-2 font-display text-3xl font-bold text-neutral-950 md:text-4xl">
          Dedicados a tu bienestar y belleza
        </h2>
        <p class="mt-6 text-lg leading-relaxed text-neutral-600">
          Somos una clínica de medicina estética dedicada a resolver diferentes necesidades de nuestros pacientes tanto mujeres como hombres. Nuestros principales procedimientos son Faciales, Corporales, Ginecológicos y Hormonales.
        </p>
        <p class="mt-4 text-lg leading-relaxed text-neutral-600">
          Ubicados en Las Condes, Santiago de Chile, ofrecemos un ambiente moderno, cálido y seguro donde nuestros pacientes pueden sentirse cómodos durante todo su proceso.
        </p>
      </div>
      <div class="aspect-[4/3] overflow-hidden rounded-2xl">
        <img
          src="/images/site/clinica-intro.webp"
          alt="Dr. David Ben-Dov - Director Médico de Clínica Bendov"
          class="h-full w-full object-cover"
          loading="lazy"
          decoding="async"
        />
      </div>
    </div>

  </section>

  <!-- Mission / Philosophy / Vision -->
  <section class="bg-white pt-10 pb-20 md:pt-14 md:pb-28">
    <div class="mx-auto max-w-6xl px-6">
      <div class="grid grid-cols-1 gap-8 md:grid-cols-3">
        <div class="rounded-2xl bg-primary-700 p-8 text-center shadow-sm">
          <div class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-primary-200 text-primary-600">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" />
            </svg>
          </div>
          <h3 class="font-display text-xl font-bold text-white">Misión</h3>
          <p class="mt-3 text-primary-100 leading-relaxed">
            Brindar una atención médica especializada de primer nivel, con tecnología avanzada para mejorar la calidad de vida de cada uno de nuestros pacientes.
          </p>
        </div>
        <div class="rounded-2xl bg-primary-700 p-8 text-center shadow-sm">
          <div class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-primary-200 text-primary-600">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
            </svg>
          </div>
          <h3 class="font-display text-xl font-bold text-white">Filosofía</h3>
          <p class="mt-3 text-primary-100 leading-relaxed">
            Acompañar y asesorar a nuestros pacientes en el cumplimiento de sus deseos estéticos, siempre apegados a la verdad evitando falsas promesas, y priorizando los beneficios de una salud integral.
          </p>
        </div>
        <div class="rounded-2xl bg-primary-700 p-8 text-center shadow-sm">
          <div class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-primary-200 text-primary-600">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </div>
          <h3 class="font-display text-xl font-bold text-white">Visión</h3>
          <p class="mt-3 text-primary-100 leading-relaxed">
            Ser reconocidos como la mejor Clínica de Medicina Estética de Chile, entregando una buena atención y servicio con altos niveles de calidad y gestión.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Doctors -->
  <section class="bg-neutral-100 py-20 md:py-28">
    <div class="mx-auto max-w-6xl px-6">
      <div class="text-center">
        <p class="text-sm font-semibold uppercase tracking-[0.15em] text-primary-600">Equipo Médico</p>
        <h2 class="mt-2 font-display text-3xl font-bold text-neutral-950 md:text-4xl">
          Profesionales de excelencia
        </h2>
        <p class="mx-auto mt-4 max-w-2xl text-lg text-neutral-500">
          Nuestro equipo está conformado por médicos especializados con amplia formación académica y años de experiencia.
        </p>
      </div>

      <div class="mt-16 space-y-12">
        {doctors.map((doctor, i) => (
          <div class={`flex flex-col gap-8 rounded-2xl bg-white p-6 shadow-sm ring-1 ring-neutral-100 md:flex-row md:items-center md:p-8 ${i % 2 !== 0 ? 'md:flex-row-reverse' : ''}`}>
            <!-- Photo + Name (sidebar) -->
            <div class="flex flex-col items-center md:w-56 md:shrink-0">
              <div class="h-44 w-44 overflow-hidden rounded-full ring-4 ring-primary-100">
                <img
                  src={doctor.image}
                  alt={doctor.name}
                  class="h-full w-full object-cover"
                  loading="lazy"
                  decoding="async"
                />
              </div>
              <h3 class="mt-4 text-center font-display text-lg font-bold text-neutral-900">{doctor.name}</h3>
              <p class="mt-1 text-center text-sm font-semibold text-primary-600">{doctor.role}</p>
            </div>

            <!-- Credentials + Specialties -->
            <div class="flex-1 min-w-0">
              <!-- Credentials -->
              <div>
                <h4 class="text-sm font-semibold uppercase tracking-wider text-neutral-400">Formación y Credenciales</h4>
                <ul class="mt-3 space-y-2">
                  {doctor.credentials.map((cred) => (
                    <li class="flex items-start gap-2.5 text-sm leading-relaxed text-neutral-600">
                      <svg class="mt-1 h-4 w-4 shrink-0 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.438 60.438 0 00-.491 6.347A48.62 48.62 0 0112 20.904a48.62 48.62 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.636 50.636 0 00-2.658-.813A59.906 59.906 0 0112 3.493a59.903 59.903 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0112 13.489a50.702 50.702 0 017.74-3.342" />
                      </svg>
                      <span>{cred}</span>
                    </li>
                  ))}
                </ul>
              </div>

              <!-- Specialties -->
              <div class="mt-5">
                <h4 class="text-sm font-semibold uppercase tracking-wider text-neutral-400">Áreas de Especialidad</h4>
                <div class="mt-3 flex flex-wrap gap-2">
                  {doctor.specialties.map((spec) => (
                    <span class="inline-block rounded-full bg-primary-50 px-3 py-1 text-xs font-medium text-primary-700 ring-1 ring-primary-100">
                      {spec}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="bg-primary-700 py-20">
    <div class="mx-auto max-w-4xl px-6 text-center">
      <h2 class="font-display text-3xl font-bold text-white md:text-4xl">
        Agenda tu evaluación gratuita
      </h2>
      <p class="mt-4 text-lg text-primary-100">
        Nuestro equipo médico está listo para asesorarte y diseñar el tratamiento ideal para ti. Escríbenos sin compromiso.
      </p>
      <a
        href={siteConfig.contact.whatsappHref}
        target="_blank"
        rel="noopener noreferrer"
        class="mt-8 inline-flex items-center gap-2 rounded-full bg-white px-8 py-4 text-base font-semibold text-primary-700 shadow-lg transition-all hover:scale-105 hover:shadow-xl"
      >
        <WhatsAppIcon class="h-5 w-5 text-[#25d366]" />
        Escríbenos por WhatsApp
      </a>
    </div>
  </section>
</BaseLayout>
